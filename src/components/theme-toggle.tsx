'use client';

import { useTheme } from 'next-themes';
import { useEffect, useState } from 'react';

export function ThemeToggle() {
  const { theme, setTheme } = useTheme();
  const [mounted, setMounted] = useState(false);

  useEffect(() => {
    setMounted(true);
  }, []);

  if (!mounted) {
    return (
      <div className="theme-switch">
        <input type="checkbox" className="theme-switch__checkbox" />
        <div className="theme-switch__container">
          <div className="theme-switch__clouds"></div>
          <div className="theme-switch__stars-container">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144 55">
              <path fill="currentColor" d="M33.362 0.003C33.615 0.028 33.845 0.144 34.017 0.329C34.2 0.514 34.314 0.756 34.339 1.009C34.364 1.262 34.299 1.514 34.156 1.729C34.013 1.943 33.799 2.108 33.546 2.195C33.293 2.282 33.017 2.285 32.762 2.202C32.507 2.119 32.289 1.958 32.138 1.746C31.987 1.534 31.912 1.283 31.925 1.029C31.937 0.775 32.037 0.532 32.209 0.338C32.381 0.143 32.615 0.009 32.872 -0.048C33.129 -0.105 33.395 -0.085 33.639 0.003H33.362ZM47.804 0.003C48.057 0.028 48.287 0.144 48.459 0.329C48.632 0.514 48.746 0.756 48.771 1.009C48.796 1.262 48.731 1.514 48.588 1.729C48.445 1.943 48.231 2.108 47.978 2.195C47.725 2.282 47.449 2.285 47.194 2.202C46.939 2.119 46.721 1.958 46.57 1.746C46.419 1.534 46.344 1.283 46.357 1.029C46.369 0.775 46.469 0.532 46.641 0.338C46.813 0.143 47.047 0.009 47.304 -0.048C47.561 -0.105 47.827 -0.085 48.071 0.003H47.804ZM40.583 6.003C40.836 6.028 41.066 6.144 41.238 6.329C41.411 6.514 41.525 6.756 41.55 7.009C41.575 7.262 41.51 7.514 41.367 7.729C41.224 7.943 41.01 8.108 40.757 8.195C40.504 8.282 40.228 8.285 39.973 8.202C39.718 8.119 39.5 7.958 39.349 7.746C39.198 7.534 39.123 7.283 39.136 7.029C39.148 6.775 39.248 6.532 39.42 6.338C39.592 6.143 39.826 6.009 40.083 5.952C40.34 5.895 40.606 5.915 40.85 6.003H40.583ZM6.693 8.003C6.946 8.028 7.176 8.144 7.348 8.329C7.521 8.514 7.635 8.756 7.66 9.009C7.685 9.262 7.62 9.514 7.477 9.729C7.334 9.943 7.12 10.108 6.867 10.195C6.614 10.282 6.338 10.285 6.083 10.202C5.828 10.119 5.61 9.958 5.459 9.746C5.308 9.534 5.233 9.283 5.246 9.029C5.258 8.775 5.358 8.532 5.53 8.338C5.702 8.143 5.936 8.009 6.193 7.952C6.45 7.895 6.716 7.915 6.96 8.003H6.693ZM63.334 8.003C63.587 8.028 63.817 8.144 63.989 8.329C64.162 8.514 64.276 8.756 64.301 9.009C64.326 9.262 64.261 9.514 64.118 9.729C63.975 9.943 63.761 10.108 63.508 10.195C63.255 10.282 62.979 10.285 62.724 10.202C62.469 10.119 62.251 9.958 62.1 9.746C61.949 9.534 61.874 9.283 61.887 9.029C61.899 8.775 61.999 8.532 62.171 8.338C62.343 8.143 62.577 8.009 62.834 7.952C63.091 7.895 63.357 7.915 63.601 8.003H63.334Z"/>
            </svg>
          </div>
          <div className="theme-switch__circle-container">
            <div className="theme-switch__sun-moon-container">
              <div className="theme-switch__moon">
                <div className="theme-switch__spot"></div>
                <div className="theme-switch__spot"></div>
                <div className="theme-switch__spot"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
    );
  }

  const isDark = theme === 'dark';

  return (
    <label className="theme-switch" aria-label="Toggle theme">
      <input 
        type="checkbox" 
        className="theme-switch__checkbox" 
        checked={isDark}
        onChange={() => setTheme(isDark ? 'light' : 'dark')}
      />
      <div className="theme-switch__container">
        <div className="theme-switch__clouds"></div>
        <div className="theme-switch__stars-container">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144 55">
            <path fill="currentColor" d="M33.362 0.003C33.615 0.028 33.845 0.144 34.017 0.329C34.2 0.514 34.314 0.756 34.339 1.009C34.364 1.262 34.299 1.514 34.156 1.729C34.013 1.943 33.799 2.108 33.546 2.195C33.293 2.282 33.017 2.285 32.762 2.202C32.507 2.119 32.289 1.958 32.138 1.746C31.987 1.534 31.912 1.283 31.925 1.029C31.937 0.775 32.037 0.532 32.209 0.338C32.381 0.143 32.615 0.009 32.872 -0.048C33.129 -0.105 33.395 -0.085 33.639 0.003H33.362ZM47.804 0.003C48.057 0.028 48.287 0.144 48.459 0.329C48.632 0.514 48.746 0.756 48.771 1.009C48.796 1.262 48.731 1.514 48.588 1.729C48.445 1.943 48.231 2.108 47.978 2.195C47.725 2.282 47.449 2.285 47.194 2.202C46.939 2.119 46.721 1.958 46.57 1.746C46.419 1.534 46.344 1.283 46.357 1.029C46.369 0.775 46.469 0.532 46.641 0.338C46.813 0.143 47.047 0.009 47.304 -0.048C47.561 -0.105 47.827 -0.085 48.071 0.003H47.804ZM40.583 6.003C40.836 6.028 41.066 6.144 41.238 6.329C41.411 6.514 41.525 6.756 41.55 7.009C41.575 7.262 41.51 7.514 41.367 7.729C41.224 7.943 41.01 8.108 40.757 8.195C40.504 8.282 40.228 8.285 39.973 8.202C39.718 8.119 39.5 7.958 39.349 7.746C39.198 7.534 39.123 7.283 39.136 7.029C39.148 6.775 39.248 6.532 39.42 6.338C39.592 6.143 39.826 6.009 40.083 5.952C40.34 5.895 40.606 5.915 40.85 6.003H40.583ZM6.693 8.003C6.946 8.028 7.176 8.144 7.348 8.329C7.521 8.514 7.635 8.756 7.66 9.009C7.685 9.262 7.62 9.514 7.477 9.729C7.334 9.943 7.12 10.108 6.867 10.195C6.614 10.282 6.338 10.285 6.083 10.202C5.828 10.119 5.61 9.958 5.459 9.746C5.308 9.534 5.233 9.283 5.246 9.029C5.258 8.775 5.358 8.532 5.53 8.338C5.702 8.143 5.936 8.009 6.193 7.952C6.45 7.895 6.716 7.915 6.96 8.003H6.693ZM63.334 8.003C63.587 8.028 63.817 8.144 63.989 8.329C64.162 8.514 64.276 8.756 64.301 9.009C64.326 9.262 64.261 9.514 64.118 9.729C63.975 9.943 63.761 10.108 63.508 10.195C63.255 10.282 62.979 10.285 62.724 10.202C62.469 10.119 62.251 9.958 62.1 9.746C61.949 9.534 61.874 9.283 61.887 9.029C61.899 8.775 61.999 8.532 62.171 8.338C62.343 8.143 62.577 8.009 62.834 7.952C63.091 7.895 63.357 7.915 63.601 8.003H63.334Z"/>
          </svg>
        </div>
        <div className="theme-switch__circle-container">
          <div className="theme-switch__sun-moon-container">
            <div className="theme-switch__moon">
              <div className="theme-switch__spot"></div>
              <div className="theme-switch__spot"></div>
              <div className="theme-switch__spot"></div>
            </div>
          </div>
        </div>
      </div>
    </label>
  );
}